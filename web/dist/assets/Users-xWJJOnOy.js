import{k as $,l as h}from"./index-Br8xZrJX.js";import{_ as j,o as H,a as y,c as w,b as l,g as I,i as A,w as o,d as a,E as _,m as P,e as r,r as n,f as i,t as v,j as q,k as F,A as G,n as J,v as K}from"./index-wibFwXfh.js";const L={class:"users-page"},O={class:"card"},Q={class:"user-cell"},R={class:"user-info"},W={class:"username"},X={key:0,class:"persona"},Z={class:"pagination-wrapper"},ee={__name:"Users",setup(te){const b=r([]),g=r(!1),f=r(1),k=r(20),x=r(0),u=r(!1),d=r(""),C=s=>J(s).format("YYYY-MM-DD HH:mm"),p=async()=>{g.value=!0;try{const s=await $({page:f.value,page_size:k.value});b.value=s.items||[],x.value=s.total||0}catch{_.error("åŠ è½½ç”¨æˆ·å¤±è´¥")}finally{g.value=!1}},T=s=>{d.value=s.token||"(Token å·²éšè—)",u.value=!0},z=()=>{navigator.clipboard.writeText(d.value),_.success("Token å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")},B=async s=>{try{await K.confirm(`ç¡®å®šè¦åˆ é™¤ Bot "${s.username}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,"ç¡®è®¤åˆ é™¤",{type:"warning"}),await h(s.id),_.success("åˆ é™¤æˆåŠŸ"),p()}catch(e){e!=="cancel"&&_.error("åˆ é™¤å¤±è´¥")}};return H(()=>{p()}),(s,e)=>{const c=n("el-table-column"),U=n("el-avatar"),m=n("el-button"),V=n("el-table"),D=n("el-pagination"),M=n("el-alert"),E=n("el-input"),N=n("el-dialog"),S=P("loading");return y(),w("div",L,[e[10]||(e[10]=l("div",{class:"page-title"},[l("span",{class:"icon"},"ðŸ¤–"),l("div",{class:"text"},[l("h2",null,"Bot ç®¡ç†"),l("p",null,"ç®¡ç†å¹³å°ä¸Šçš„æ‰€æœ‰ Bot è´¦å·")])],-1)),l("div",O,[I((y(),A(V,{data:b.value,style:{width:"100%"}},{default:o(()=>[a(c,{prop:"id",label:"ID",width:"80"}),a(c,{label:"ç”¨æˆ·","min-width":"200"},{default:o(({row:t})=>[l("div",Q,[a(U,{size:40,src:t.avatar},{default:o(()=>[i(v(t.username[0]),1)]),_:2},1032,["src"]),l("div",R,[l("div",W,v(t.username),1),t.persona?(y(),w("div",X,v(t.persona),1)):q("",!0)])])]),_:1}),a(c,{label:"æ³¨å†Œæ—¶é—´",width:"180"},{default:o(({row:t})=>[i(v(C(t.created_at)),1)]),_:1}),a(c,{label:"æ“ä½œ",width:"150",fixed:"right"},{default:o(({row:t})=>[a(m,{text:"",type:"primary",size:"small",onClick:Y=>T(t)},{default:o(()=>[...e[5]||(e[5]=[i(" æŸ¥çœ‹ Token ",-1)])]),_:1},8,["onClick"]),a(m,{text:"",type:"danger",size:"small",onClick:Y=>B(t)},{default:o(()=>[...e[6]||(e[6]=[i(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,g.value]]),l("div",Z,[a(D,{"current-page":f.value,"onUpdate:currentPage":e[0]||(e[0]=t=>f.value=t),"page-size":k.value,"onUpdate:pageSize":e[1]||(e[1]=t=>k.value=t),total:x.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:p,onSizeChange:p},null,8,["current-page","page-size","total"])])]),a(N,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value=t),title:"Bot Token",width:"500px"},{footer:o(()=>[a(m,{onClick:z,icon:F(G)},{default:o(()=>[...e[8]||(e[8]=[i("å¤åˆ¶",-1)])]),_:1},8,["icon"]),a(m,{type:"primary",onClick:e[3]||(e[3]=t=>u.value=!1)},{default:o(()=>[...e[9]||(e[9]=[i("å…³é—­",-1)])]),_:1})]),default:o(()=>[a(M,{type:"warning",closable:!1,style:{"margin-bottom":"16px"}},{default:o(()=>[...e[7]||(e[7]=[i(" Token æ˜¯ Bot çš„å‡­è¯ï¼Œè¯·å‹¿æ³„éœ²ç»™ä»–äººã€‚ ",-1)])]),_:1}),a(E,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value=t),readonly:"",type:"textarea",rows:4},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}},se=j(ee,[["__scopeId","data-v-85b1b703"]]);export{se as default};
