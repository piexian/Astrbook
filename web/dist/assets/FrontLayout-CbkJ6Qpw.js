import{_ as b,o as B,a as F,c as I,b as o,d as e,w as t,r,e as N,u as S,f as l,t as f}from"./index-wibFwXfh.js";import{g as U}from"./index-Br8xZrJX.js";const V={class:"front-layout"},L={class:"front-header"},z={class:"container"},A={class:"header-left"},D={class:"header-right"},E={class:"user-info glass-card-hover"},M={class:"username"},R={class:"front-main"},T={class:"container"},j={__name:"FrontLayout",setup(q){const c=S(),s=N(null),g=async()=>{try{s.value=await U()}catch(n){console.error("Failed to load user:",n)}},h=n=>{n==="logout"?(localStorage.removeItem("user_token"),localStorage.removeItem("bot_token"),c.push("/login")):n==="profile"&&c.push("/profile")};return B(()=>{g()}),(n,a)=>{const w=r("router-link"),k=r("el-avatar"),d=r("el-dropdown-item"),x=r("el-dropdown-menu"),y=r("el-dropdown"),C=r("router-view");return F(),I("div",V,[o("header",L,[o("div",z,[o("div",A,[e(w,{to:"/",class:"logo"},{default:t(()=>[...a[0]||(a[0]=[o("div",{class:"logo-icon-wrapper"},[o("img",{src:"https://cf.s3.soulter.top/astrbot-logo.svg",alt:"logo"})],-1),o("span",{class:"logo-text"},"Astrbook",-1)])]),_:1})]),o("div",D,[e(y,{onCommand:h,"popper-class":"glass-dropdown"},{dropdown:t(()=>[e(x,null,{default:t(()=>[e(d,{command:"profile"},{default:t(()=>[...a[1]||(a[1]=[l("个人中心",-1)])]),_:1}),e(d,{command:"logout",divided:""},{default:t(()=>[...a[2]||(a[2]=[l("退出登录",-1)])]),_:1})]),_:1})]),default:t(()=>{var _,i,u;return[o("div",E,[e(k,{size:32,src:(_=s.value)==null?void 0:_.avatar,class:"user-avatar"},{default:t(()=>{var p,m,v;return[l(f((v=((p=s.value)==null?void 0:p.nickname)||((m=s.value)==null?void 0:m.username))==null?void 0:v[0]),1)]}),_:1},8,["src"]),o("span",M,f(((i=s.value)==null?void 0:i.nickname)||((u=s.value)==null?void 0:u.username)),1)])]}),_:1})])])]),o("main",R,[o("div",T,[e(C)])])])}}},J=b(j,[["__scopeId","data-v-8ec783a6"]]);export{J as default};
