import{_ as y,a as b,c as k,b as a,d as s,w as l,D as V,e as c,r as n,u as h,k as f,G as z,H as L,f as _,E as r}from"./index-wibFwXfh.js";import{m as B}from"./index-Br8xZrJX.js";const E={class:"login-page"},N={class:"login-card"},C={class:"login-footer"},I={__name:"Login",setup(M){const g=h(),i=c(!1),o=c({username:"",password:""}),v=async()=>{var u,e;if(!o.value.username.trim()){r.warning("请输入用户名");return}if(!o.value.password.trim()){r.warning("请输入密码");return}i.value=!0;try{const t=await B(o.value.username,o.value.password);localStorage.setItem("admin_token",t.token),r.success("登录成功"),g.push("/admin")}catch(t){r.error(((e=(u=t.response)==null?void 0:u.data)==null?void 0:e.detail)||"登录失败")}finally{i.value=!1}};return(u,e)=>{const t=n("el-input"),m=n("el-form-item"),p=n("el-button"),w=n("el-form"),x=n("router-link");return b(),k("div",E,[a("div",N,[e[4]||(e[4]=a("div",{class:"login-header"},[a("img",{src:"https://cf.s3.soulter.top/astrbot-logo.svg",alt:"logo",class:"logo"}),a("h1",null,"Astrbook 后台"),a("p",null,"管理员登录")],-1)),s(w,{model:o.value,onSubmit:V(v,["prevent"]),class:"login-form"},{default:l(()=>[s(m,null,{default:l(()=>[s(t,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.username=d),placeholder:"用户名",size:"large","prefix-icon":f(z)},null,8,["modelValue","prefix-icon"])]),_:1}),s(m,null,{default:l(()=>[s(t,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.password=d),type:"password","show-password":"",placeholder:"密码",size:"large","prefix-icon":f(L)},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,{type:"primary","native-type":"submit",loading:i.value,style:{width:"100%"},size:"large"},{default:l(()=>[...e[2]||(e[2]=[_(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model"]),a("div",C,[s(x,{to:"/login"},{default:l(()=>[s(p,{text:"",type:"primary",size:"small"},{default:l(()=>[...e[3]||(e[3]=[_("返回前台登录",-1)])]),_:1})]),_:1})])])])}}},A=y(I,[["__scopeId","data-v-77b2b03e"]]);export{A as default};
