import{a as T,i as B}from"./index-Br8xZrJX.js";import{_ as M,o as E,a as b,c as S,b as s,g as Y,i as N,w as n,d as a,E as m,m as V,e as i,r,f as c,t as d,n as $,v as j}from"./index-wibFwXfh.js";const H={class:"threads-page"},I={class:"card"},U={class:"author-cell"},P={class:"pagination-wrapper"},q={__name:"Threads",setup(A){const v=i([]),u=i(!1),_=i(1),g=i(20),h=i(0),f=l=>$(l).format("YYYY-MM-DD HH:mm"),p=async()=>{u.value=!0;try{const l=await T({page:_.value,page_size:g.value});v.value=l.items||[],h.value=l.total||0}catch{m.error("åŠ è½½å¸–å­å¤±è´¥")}finally{u.value=!1}},y=async l=>{try{await j.confirm(`ç¡®å®šè¦åˆ é™¤å¸–å­ "${l.title}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,"ç¡®è®¤åˆ é™¤",{type:"warning"}),await B(l.id),m.success("åˆ é™¤æˆåŠŸ"),p()}catch(t){t!=="cancel"&&m.error("åˆ é™¤å¤±è´¥")}};return E(()=>{p()}),(l,t)=>{const o=r("el-table-column"),w=r("router-link"),k=r("el-avatar"),x=r("el-button"),z=r("el-table"),D=r("el-pagination"),C=V("loading");return b(),S("div",H,[t[3]||(t[3]=s("div",{class:"page-title"},[s("span",{class:"icon"},"ðŸ’¬"),s("div",{class:"text"},[s("h2",null,"å¸–å­ç®¡ç†"),s("p",null,"æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰å¸–å­")])],-1)),s("div",I,[Y((b(),N(z,{data:v.value,style:{width:"100%"}},{default:n(()=>[a(o,{prop:"id",label:"ID",width:"80"}),a(o,{prop:"title",label:"æ ‡é¢˜","min-width":"250"},{default:n(({row:e})=>[a(w,{to:`/admin/thread/${e.id}`,class:"thread-link"},{default:n(()=>[c(d(e.title),1)]),_:2},1032,["to"])]),_:1}),a(o,{label:"ä½œè€…",width:"150"},{default:n(({row:e})=>[s("div",U,[a(k,{size:28,src:e.author.avatar},{default:n(()=>[c(d(e.author.nickname[0]),1)]),_:2},1032,["src"]),s("span",null,d(e.author.nickname),1)])]),_:1}),a(o,{prop:"reply_count",label:"å›žå¤æ•°",width:"100",align:"center"}),a(o,{label:"æœ€åŽå›žå¤",width:"160"},{default:n(({row:e})=>[c(d(f(e.last_reply_at)),1)]),_:1}),a(o,{label:"å‘å¸ƒæ—¶é—´",width:"160"},{default:n(({row:e})=>[c(d(f(e.created_at)),1)]),_:1}),a(o,{label:"æ“ä½œ",width:"100",fixed:"right"},{default:n(({row:e})=>[a(x,{type:"danger",text:"",size:"small",onClick:F=>y(e)},{default:n(()=>[...t[2]||(t[2]=[c(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[C,u.value]]),s("div",P,[a(D,{"current-page":_.value,"onUpdate:currentPage":t[0]||(t[0]=e=>_.value=e),"page-size":g.value,"onUpdate:pageSize":t[1]||(t[1]=e=>g.value=e),total:h.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:p,onSizeChange:p},null,8,["current-page","page-size","total"])])])])}}},K=M(q,[["__scopeId","data-v-6ac10b7e"]]);export{K as default};
